# 🎅 우테코 프리코스 4주차 - 크리스마스 프로모션

우테코 프리코스 4주차 미션 **크리스마스 프로모션** 은 비즈니스팀에서 온 이벤트 메일을 바탕으로 시스템을 만드는 것입니다.

크리스마스를 맞이하여 `12월` 한 달간 각종 물건들에 대해 할인을 하여 최대한 많은 고객을 끌어모아 일부는 새해 이벤트에도 참여하게 하는 것이 목표 입니다.

해당 프로그램 에서는 방문할 날짜와 주문 내역을 입력 하여 여러 혜택들을 어떻게 얼마나 받을 수 있는지 살펴볼 수 있습니다.

---

## 🔍 목차

- ⚙️ 구현할 기능 목록
- 📋 프로젝트 구조
- 🎊 새해 때의 새로운 이벤트
- ✨ 프리코스를 통해 배운 것

---

## ⚙️ 구현할 기능 목록

예외 상황이 생기면 `[ERROR]` 로 시작하는 메세지를 출력한 후 다시 입력을 받습니다.

### 0️⃣ 할인 및 프로모션 목록

비즈니스팀에서 요구하는 할인 또는 프로모션 목록 부터 정리를 해보도록 하겠습니다.

**주의 사항**

- 총주문 금액 `10,000`원 이상부터 이벤트 적용
- 음료만 주문은 불가능
- 메뉴는 한 번에 최대 20개까지만 주문 가능

| 프로모션   | 조건                                                                                           | 대상     | 혜택                                        |
|--------|----------------------------------------------------------------------------------------------|--------|-------------------------------------------|
| 증정 이벤트 | 할인 전 총주문 금액이 `12만원` 이상일 경우                                                                   |        | `샴페인 1개` 증정                               |
|        |                                                                                              |        |                                           |
| 평일 할인  | 방문 날짜 요일이 `일 ~ 목` 일 경우                                                                       | 디저트 메뉴 | 1개당 `2,023` 할인                            |
| 주말 할인  | 방문 날짜 요일이 `금 ~ 토` 일 경우                                                                       | 메인 메뉴  | 1개당 `2,023` 할인                            |
|        |                                                                                              |        |                                           |
| 디데이 할인 | 방문 날짜가 `12/1 ~ 12/25` 일 경우                                                                   | 총주문 금액 | `1,000 + ([날짜 일수 - 1] * 100)` 할인          |
| 특별 할인  | 방문 날짜 `별날` 일 경우 (2023년 `별날` : `12/3` `12/10` `12/17` `12/24` `12/25` `12/31`)                | 총주문 금액 | `1,000` 할인                                |
|        |                                                                                              |        |                                           |
| 이벤트 배지 | 총혜택 금액이 아래의 경우<ul><li>`5천원` 이상 `1만원` 미만</li><li>`1만원` 이상 `2만원` 미만</li><li>`2만원` 이상</li></ul> |        | <ul><li>별</li><li>트리</li><li>산타</li></ul> |

### 1️⃣ 식당 예상 방문 날짜 받기 ✔️

<table>
<tr>
    <th>동작</th>
    <th>예외 상황</th>
</tr>
<tr>
<td><ul>
    <li>
        질문에 해당하는 아래 메세지 출력 ✔️<br>
        <code>안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.<br>12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)</code>
    </li>
    <li>날짜를 입력받고 잘 입력 받았는지 체크 ✔️</li>
</ul></td>
<td><ul>
    <li>
        입력받은 날짜가 숫자로 변환될 수 없는 경우 ✔️<br>
        <code>[ERROR] 숫자 형식이 아닙니다. 다시 입력해 주세요.</code>
    </li>
    <li>
        입력받은 날짜가 <code>0</code> 또는 <code>32</code> 와 같이 12월에 존재 하지 않을 경우 ✔️<br>
        <code>[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요.</code>
    </li>
</ul></td>
</tr>
</table>

### 2️⃣ 주문 받기 ✔️

<table>
<tr>
    <th>동작</th>
    <th>예외 상황</th>
</tr>
<tr>
<td><ul>
    <li>
        질문에 해당하는 아래 메세지 출력 ✔️<br>
        <code>주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)</code>
    </li>
    <li>입력 값을 <code>,</code> 로 분리 후 각 요소를 <code>-</code> 로 다시 분리 한 뒤 앞은 메뉴 이름, 뒤는 개수로 판단 ✔️</li>
    <li>메뉴 이름과 수량을 통해 주문을 잘 받았는지 체크 ✔️</li>
    <li>
        이후 이벤트 헤택 출력을 위해 다음 안내 메세지 출력 ✔️<br>
        <code>12월 26일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!</code>
    </li>
</ul></td>
<td><ul>
    <li>
        메뉴와 개수 구분자 <code>-</code>가 없는 경우 ✔️<br>
        <code>[ERROR] 메뉴와 숫자를 하이픈(-) 으로 구분하여 다시 입력해 주세요.</code>
    </li>
    <li>
        메뉴의 개수가 숫자로 변환될 수 없는 경우 ✔️<br>
        <code>[ERROR] 유효하지 않은 주문 개수입니다. 다시 입력해 주세요.</code>
    </li>
    <li>
        메뉴의 개수가 1이상이 아닐 경우 ✔️<br>
        <code>[ERROR] 메뉴는 1개 이상 주문이 가능합니다. 다시 입력해 주세요.</code>
    </li>
    <li>
        메뉴가 없을 경우 ✔️<br>
        <code>[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.</code>
    </li>
    <li>
        메뉴가 중복 되었을 경우 (e.g. 시저샐러드-1,시저샐러드-1) ✔️<br>
        <code>[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.</code>
    </li>
    <li>
        음료만 시켰을 경우 ✔️<br>
        <code>[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.</code>
    </li>
    <li>
        총 메뉴의 개수가 최대 수량을 초과 했을 경우 ✔️<br>
        <code>[ERROR] 메뉴는 총 20개 까지만 주문할 수 있습니다. 다시 입력해 주세요.</code>
    </li>
</ul></td>
</tr>
</table>

### 3️⃣ 주문 메뉴 출력 ✔️

<table>
<tr>
    <th>동작</th>
    <th>원리</th>
</tr>
<tr>
<td><ul>
    <li>
        주문 메뉴 종류와 수량을 통해 아래 메세지 출력 ✔️<br>
        <code>&lt;주문 메뉴&gt;</code><br>
        <code>타파스 1개</code><br>
        <code>제로콜라 1개</code><br>
        또는<br>
        <code>&lt;주문 메뉴&gt;</code><br>
        <code>티본스테이크 1개</code><br>
        <code>바비큐립 1개</code><br>
        <code>초코케이크 2개</code><br>
        <code>제로콜라 1개</code>
    </li>
</ul></td>
<td><ul>
    <li>
        메뉴를 요소로 하는 일급 컬렉션에서 종류와 수량으로 출력 문구를 제작
    </li>
</ul></td>
</tr>
</table>

### 3️⃣ 할인 전 총주문 금액 ✔️

<table>
<tr>
    <th>동작</th>
    <th>원리</th>
</tr>
<tr>
<td><ul>
    <li>
        주문 메뉴 종류와 수량을 통해 아래 메세지 출력 ✔️<br>
        <code>&lt;할인 전 총주문 금액&gt;</code><br>
        <code>8,500원</code><br>
        또는<br>
        <code>&lt;할인 전 총주문 금액&gt;</code><br>
        <code>142,000원</code>
    </li>
</ul></td>
<td><ul>
    <li>
        메뉴를 요소로 하는 일급 컬렉션에서 각 메뉴의 가격과 수량을 통해 단순 총 주문 금액 계산
    </li>
</ul></td>
</tr>
</table>

### 4️⃣ 증정 메뉴 출력 ✔️

<table>
<tr>
    <th>동작</th>
    <th>원리</th>
</tr>
<tr>
<td><ul>
    <li>
        증정 프로모션들을 통해 주문에 부합하는지 판별 후 아래 메세지 출력 ✔️<br>
        <code>&lt;증정 메뉴&gt;</code><br>
        <code>없음</code><br>
        또는<br>
        <code>&lt;증정 메뉴&gt;</code><br>
        <code>샴페인 1개</code>
    </li>
</ul></td>
<td><ul>
    <li>
        프로모션을 담당하는 곳 <code>Controller</code> 은 메뉴 <code>Model</code> 를 통해 조건에 부합한지 판단 후 특정 물품을 증점 상품으로 제공 
    </li>
</ul></td>
</tr>
</table>

### 5️⃣ 혜택 내역 출력 ✔️

<table>
<tr>
    <th>동작</th>
    <th>원리</th>
</tr>
<tr>
<td><ul>
    <li>
        헤택 프로모션들을 통해 주문에 부합하는지 판별 후 아래 메세지 출력 ✔️<br>
        <code>&lt;혜택 내역&gt;</code><br>
        <code>없음</code><br>
        또는<br>
        <code>&lt;혜택 내역&gt;</code><br>
        <code>크리스마스 디데이 할인: -1,200원</code><br>
        <code>평일 할인: -4,046원</code><br>
        <code>특별 할인: -1,000원</code><br>
        <code>증정 이벤트: -25,000원</code>
    </li>
</ul></td>
<td><ul>
    <li>
        프로모션을 담당하는 곳 <code>Controller</code> 에서 함수형 인터페이스로 된 할인 프로모션들을 적용해보아 부합한 것들을 계산
    </li>
    <li>
        증정 프로모션도 계산 후 해당 물품의 가격 또한 할인 금액으로 선정
    </li>
</ul></td>
</tr>
</table>

### 6️⃣ 총헤택 금액 출력 ✔️

<table>
<tr>
    <th>동작</th>
    <th>원리</th>
</tr>
<tr>
<td><ul>
    <li>
        헤택 프로모션들을 통해 모든 헤택 계산 후 금액 합을 아래 메세지로 출력 ✔️<br>
        <code>&lt;총혜택 금액&gt;</code><br>
        <code>0원</code><br>
        또는<br>
        <code>&lt;총혜택 금액&gt;</code><br>
        <code>-31,246원</code>
    </li>
</ul></td>
<td><ul>
    <li>
        프로모션을 담당하는 곳 <code>Controller</code> 에서 헤택 내역 금액들의 총 합 계산
    </li>
</ul></td>
</tr>
</table>

### 7️⃣ 할인 후 예상 결제 금액 출력 ✔️

<table>
<tr>
    <th>동작</th>
    <th>원리</th>
</tr>
<tr>
<td><ul>
    <li>
        증정 메뉴를 총 금액으로 두고 모든 헤택내역을 뺀 에상 결제 금액을 아래 메세지로 출력 ✔️<br>
        <code>&lt;할인 후 예상 결제 금액&gt;</code><br>
        <code>8,500원</code><br>
        또는<br>
        <code>&lt;할인 후 예상 결제 금액&gt;</code><br>
        <code>-135,754원</code>
    </li>
</ul></td>
<td><ul>
    <li>
        프로모션을 담당하는 곳 <code>Controller</code> 에서 <code>[총 주문 금액 + 증정 물품 금액] - [총 할인 금액]</code> 계산
    </li>
</ul></td>
</tr>
</table>

### 8️⃣ 12월 이벤트 배지 출력 ✔️

<table>
<tr>
    <th>동작</th>
    <th>원리</th>
</tr>
<tr>
<td><ul>
    <li>
        총 헤택 금액을 선정 후 금액 별로 이벤트 배지를 아래 메세지로 출력 ✔️<br>
        <code>&lt;12월 이벤트 배지&gt;</code><br>
        <code>없음</code><br>
        또는<br>
        <code>&lt;12월 이벤트 배지&gt;</code><br>
        <code>산타</code>
    </li>
</ul></td>
<td><ul>
    <li>
        프로모션을 담당하는 곳에서 총혜택 금액을 통해 배지 계산
    </li>
</ul></td>
</tr>
</table>

---

## 📋 프로젝트 구조

### 📦 패키지

<table>
    <tr>
        <th>Package</th>
        <th>Class</th>
        <th>Description</th>
    </tr>
    <tr>
        <td rowspan="7">
            <img src="https://raw.githubusercontent.com/mallowigi/iconGenerator/master/assets/icons/folders/constants.svg?sanitize=true"/>
            <b> constant</b>
        </td>
        <td><b>Badge</b></td>
        <td>총 헤택 금액에 따라 받을 수 있는 배지</td>
    </tr>
    <tr>
        <td><b>ErrorMessage</b></td>
        <td>예외 상황에 사용 되는 정적 메세지</td>
    </tr>
    <tr>
        <td><b>GeneralMessage</b></td>
        <td>일반 적인 입력 요청 또는 결과 알림에 사용 되는 메세지</td>
    </tr>
    <tr>
        <td><b>Menu</b></td>
        <td>메뉴 이름과 종류 및 가격에 대한 정보</td>
    </tr>
    <tr>
        <td><b>MenuType</b></td>
        <td>메뉴 정보에 사용 될 메뉴 종류</td>
    </tr>
    <tr>
        <td><b>PromotionCalendar</b></td>
        <td>이벤트 기간 날짜</td>
    </tr>
    <tr>
        <td><b>ReceiptMessage</b></td>
        <td>혜택 내역에 대한 내용</td>
    </tr>
    <tr>
        <td>
            <img src="https://raw.githubusercontent.com/mallowigi/iconGenerator/master/assets/icons/folders/controllers.svg?sanitize=true"/>
            <b> controller</b>
        </td>
        <td><b>XmasController</b></td>
        <td>입력을 받아 계산하고 출력 해주는 전체 진행 담당 컨트롤러</td>
    </tr>
    <tr>
        <td rowspan="5">
            <img src="https://raw.githubusercontent.com/mallowigi/iconGenerator/master/assets/icons/folders/home.svg?sanitize=true"/>
            <b> domain</b>
        </td>
        <td><b>Promotion</b></td>
        <td>방문할 날짜와 주문에 대해 혜택 내역을 담당할 추상클래스</td>
    </tr>
    <tr>
        <td><b>XmasPromotion</b></td>
        <td><code>Promotion</code> 클래스를 구현하는 크리스마스 이벤트 담당 클래스</td>
    </tr>
    <tr>
        <td><b>Menus</b></td>
        <td>메뉴와 개수 세트들을 담당하는 클래스</td>
    </tr>
    <tr>
        <td><b>Order</b></td>
        <td><code>Menus</code> 객체를 필드로 가지며 여러 검증을 해주는 레코드</td>
    </tr>
    <tr>
        <td><b>VisitingDay</b></td>
        <td>방문할 날짜를 정수로 가지며 여러 검증을 해주는 레코드</td>
    </tr>
    <tr>
        <td rowspan="2">
            <img src="https://raw.githubusercontent.com/mallowigi/iconGenerator/master/assets/icons/folders/views.svg?sanitize=true"/>
            <b> view</b>
        </td>
        <td><b>InputView</b></td>
        <td>사용자에게 질문을 하고 입력을 받아주는 뷰</td>
    </tr>
    <tr>
        <td><b>OutputView</b></td>
        <td>사용자에게 일반적인 메세지와 결과 및 에외 메세지를 출력해주는 뷰</td>
    </tr>
</table>

---

## 🎊 새해 때의 새로운 이벤트

과제를 임하면서 새해가 왔을 때 새로운 이벤트를 위해 코드를 재사용 할 수 있도록 하려고 노력해 보았습니다.

우선, `XmasPromotion` 의 주요 함수들을 `Promotion` 이라는 추상 클래스를 만들어 옮긴 후 구현하도록 하였습니다.

이를 통해 `NewyearPromotion` 이라는 클래스를 `Promotion` 을 상속받아 구현해 보았습니다.

이후 새해 이벤트로 바꾸기 위해 아래 작업들이 있었고, `develop` 브랜치에서 해당 작업을 해보았습니다!

### 0️⃣ 할인 및 프로모션 목록

| 프로모션   | 조건                                                                                                                                                | 대상    | 혜택                                                                          |
|--------|---------------------------------------------------------------------------------------------------------------------------------------------------|-------|-----------------------------------------------------------------------------|
| 증정 이벤트 | 할인 전 총주문 금액이 `2만원` 이상일 경우                                                                                                                         |       | `제로콜라 1개` 증정                                                                |
| 증정 이벤트 | 할인 전 총 주문 금액과 크리스마스 이벤트에서의 배지가 아래 조건에 충족할 경우<ul><li>`20,000원` 이상 및 `별` 배지</li><li>`40,000원` 이상 및 `트리` 배지</li><li>`80,000원` 이상 및 `산타` 배지</li></ul> |       | <ul><li>`아이스크림 1개` 증정</li><li>`아이스크림 2개` 증정</li><li>`초코케이크 1개` 증정</li></ul> |
|        |                                                                                                                                                   |       |                                                                             |
| 불금은 마셔 | 방문 날짜가 금요일일 경우                                                                                                                                    | 음료 메뉴 | 1개당 `1,024` 할인                                                              |

### 1️⃣ 변경되어야 할 클래스

| 클래스               | 변동            |
|-------------------|---------------|
| NewyearPromotion  | 새로운 이벤트 조건 생성 |
| PromotionCalendar | 이벤트 기간 변경     |
| XmasController    | 생성하는 프로모션을 변경 |

프로모션을 새로 생성하고 날짜 상수를 바꾸며 이를 사용하는 곳에서 클래스명만 새로운 것으로 수정해주면 끝납니다.

### 2️⃣ 결과 확인

제가 생각했던 방법대로 코드 재사용이 가능하여 확장이 간단하기 확인하기 위해 `feat-newyear` 라는 브랜치를 새로 만들어 작업해 보았습니다.

`ApplicationTest` 는 12월 크리스마스 이벤트에 맞춰져 있기 때문에 재사용 할 수 없지만 신년 이벤트를 적용하기 위해 적은 시간 비용을 들였다는 것에 제가 심사숙고하여 진행한 과제가 빛을 바랄 수
있었던 것 같습니다.

```
안녕하세요! 우테코 식당 1월 이벤트 플래너입니다.
1월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)
5
주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)
해산물파스타-1,제로콜라-1
1월 5일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!

<주문 메뉴>
해산물파스타 1개
제로콜라 1개

<할인 전 총주문 금액>
38,000원

<증정 메뉴>
제로콜라 1개
아이스크림 1개

<혜택 내역>
증정 이벤트: -8,000원
불금은 마셔: -1,024원

<총혜택 금액>
-9,024원

<할인 후 예상 결제 금액>
36,976원

<1월 이벤트 배지>
없음
```

---

## ✨ 프리코스를 통해 배운 것

### 💡 MVC 패턴

- 1주차에는 어떻게 진행해야 할지 감이 잡히지 않았기에 단순히 여러가지 요구사항 대로 기능 구현에만 조첨을 두고 개발에 임하였습니다.
- 그리하여 클래스는 `ComparisionResult` 라는 결과를 가진 `DTO` 느낌의 클래스 하나만 생성하고 모든 것을 `Applcation` 에서 함수로 나누어 구현하였습니다.
- 2주차에는 다른 사람들이 진행하는 코드 리뷰를 보며 `MVC패턴` 이라는 것을 알게 되었고 저 또한 여러 곳에 검색과 우테코 디스코드 커뮤니티에 다른 분들께서 올려주신 자료로 공부하곤 했습니다.
- 2 ~ 4주차 동안 `MVC패턴` 을 프로젝트에 잘 적용하여 `Model` `View` `Controller` 로 구조화하여 각자가 각자의 임무를 수행할 수 있도록 제작하였습니다.
  ![](https://velog.velcdn.com/images/chch1213/post/e64aea66-ccc7-46a4-9fa0-926c90d7ea16/image.png)
- 최종적으로 `MVC패턴` 을 사용하면서 이후 작성 했던 테스트 코드를 통해 문제를 발견하였을 경우 해당 모듈에 접근하여 수정해야할 부분이 최소화 된다는 큰 장점이 있었습니다.
- 기존의 제 코드 방식이였으면 함수화만 하여 한 코드 내에서도 여러 라인의 오류들을 다 잡아줘야 하는 불편한 사항이 있었습니다.
- `MVC패턴` 으로 각 파일의 라인이 너무 크지 않았고 수정해야할 부분을 명확히 볼 수 있고 빠르게 고칠 수 있었습니다.

### 💡 일급 컬렉션

- 2주차부터 도입한 `일급 컬렉션` 또한 `Model` 부분에서 자료를 어떻게 잘 관리할지에 대해 고민하고 잘 적용할 수 있게 되었습니다.
- 우선 접근 제한을 할 수 있어 객체의 생성 이후 자료가 변하지 않는 `불변` 을 보장한다는 것이 큰 장점 중 하나였습니다.
- `불변` 을 보장 받으니 사용하는 곳에서도 자료가 바뀌지 않는 다 생각하니 마음 편하게 사용하며 믿을 수 있는 값이라서 일일이 변화하는 곳을 확인 하며 걱정할 필요가 없었다는 것입니다.
- 또한 제한된 메서드 안에서 사용을 하니 필요할 때 함수를 추가로 구현하여 사용하면 되니 큰 불편함 또한 없었습니다.
- 오히려 `List` 나 `Map` 을 다룰 때 `stream` 으로 변환하여 사용하면 코드가 길어질 수 있는데 해당 `일급 컬렉션` 내부에서 함수를 따로 구현하여 그 함수만 사용하니 사용하는 측에서 코드가 간략화
  되는 장점이 컸습니다.
  ![](https://velog.velcdn.com/images/chch1213/post/88f31061-e8c1-4c18-a321-dd9816bf6dfc/image.png)

### 💡 TDD - 테스트 주도 개발

- `MVC 패턴` 중 `Model` 과 `Controller` 가 개발 되면 기능 하나를 구현할 때 마다 기능 단위 테스트를 구현하는 것에 초점을 맞추어 제작하였습니다.
- 잘 구현했다 생각 했던 함수 또한 막상 테스트 코드를 돌리면 틀린 경우가 있었는데 굉장히 큰 장점은 이럴 때 발견과 수정을 반복하는 과정에 대한 시간이 매우 단축된다는 것이였습니다.
- 테스트 코드를 작성함으로써 데이터를 주는 `given` 과 함수를 돌리는 과정인 `when` 그리고 결과를 체크하는 `then` 을 작성하니 기존의 수동 테스트 과정인 `실행 > 입력 > 결과 눈으로 체크`
  과정을 버튼 하나로 간략화 할 수 있었습니다.
- 또한 여러개의 테스트 코드를 구현한 후 전체를 돌렸을 때 모두 초록색 성공이 뜬다면 심리적으로도 제가 짠 코드를 더욱 믿게 되며 안정감을 느낄 수 있던것도 큰 장점이라 생각됩니다.
- 제가 직접 짠 코드여도 모든 예외를 처리하지 않았다면 기능이 정상적으로 돌아감에도 불구하고 불안함을 느꼈기 때문입니다.
  ![](https://velog.velcdn.com/images/chch1213/post/9de834ba-9ad3-4ace-87c4-a8cdb3936315/image.png)
- 여러가지 `Annotation` 에 대해서도 학습할 수 있었는데 `@ParameterizedTest` `@ValueSource` `@CsvSource` 와 같이 여러 값을 인자로 입력하여 중복되는 테스트 코드들에
  대해 여러 입력으로 결과를 테스트 할 수 있었습니다.
  ``` java
  @ParameterizedTest
  @DisplayName("할인 전 총주문 금액")
  @CsvSource(value = {"타파스-1,제로콜라-1/8500", "티본스테이크-1,바비큐립-1,초코케이크-2,제로콜라-1/142000"}, delimiter = '/')
  void giftMenu(String menus, int amount) {
      assertThat(Order.from(menus).menus().totalAmount()).isEqualTo(amount);
  }
  ```

### 💡 함수형 인터페이스

- 3주차에서 부터 예외를 단순히 `throw` 하는 것이 아닌 입력에 예외가 있을 경우 `catch` 후 재입력을 받도록 하는 것이 추가되었습니다.
- 이로 인해 `Controller` 에서는 중복되는 구조의 `try ~ catch` 구문을 사용하게 되었는데 이러한 중복을 막기 위해 `try` 구문 안에 사용되는 함수들을 값을 반환하는 익명 함수를 사용하려고
  생각해보았습니다. 그리하여 아래 함수를 `Controller` 에서 만들었습니다.
  ``` java
  private static <T> T requestUntilValidated(Supplier<T> supplier) {
      while (true) {
          try {
              return supplier.get();
          } catch (IllegalArgumentException e) {
              OutputView.printErrorMessage(e.getMessage());
          }
      }
  }
  ```
- 만들어진 이 함수를 호출을 다음과 같이 하여 중복을 피할 수 있었습니다.
  ``` java
  requestUntilValidated(() -> VisitingDay.from(InputView.readVisitingDay(PERIOD_MONTH.getRealMonth())));
  requestUntilValidated(() -> Order.from(InputView.readOrder()))
  ```
- 4주차 최종 과제에서는 단순히 반복하여 입력받는 곳에서의 처리 중복을 피하였지만 3주차 과제에서는 당첨 조건에 대해 함수형 인터페이스를 사용하여 확장에 유연하도록 설계하였습니다.
- 함수를 넘기고 그 함수를 실행하게 함으로써 제한적인 코드를 좀 더 확장 시켜주는 느낌을 받게 되었지만 이 또한 남용할 경우 `콜백 지옥` 에 빠질 가능성이 높을 것 같다는 생각을 했습니다.

### 💡 추상 클래스

- 4주차인 최종 과제에서 새해 이벤트가 있다는 것음 암시할 수 있었기 때문에 이를 위해 이벤트 헤택에 대해서 만큼은 크리스마스와 새해 둘 다 모두 구현할 수도 있다고 생각하였습니다.
- 우선 처음에는 크리스마스 이벤트에 대해서만 구현하고 여기서 필요한 함수들을 추상 클래스로 분리하여 하면 될 것 같았습니다.
- `XmasPromotion` 제작이 완료된 후 `Promotion` 이라는 추상 클래스를 만들어 헤택에 대한 주요 함수들을 `abstract function` 으로 정의해두고 공통되어 사용되는 함수들을 부모
  클래스에서 구현하였습니다.
- 이로써 `NewyearPromotion` 을 `Promotion` 추상 클래스를 상속받아 쉽게 구현할 수 있었으며 자동으로 구현하라고 알려주는 함수 3개에 대해서만 커스텀으로 구성하면 사용할 준비가 끝나게
  되었습니다.
  ``` java
  public abstract class Promotion {
  
      ...
  
      protected final VisitingDay visitingDay;
      protected final Order order;

      public Promotion(VisitingDay visitingDay, Order order) {
          this.visitingDay = visitingDay;
          this.order = order;
      }

      protected static String formatAmount(int amount) {
          return String.format(CONTENT_AMOUNT.toString(), FORMATTER.format(amount));
      }

      public abstract Menus giftMenu();

      public abstract Map<ReceiptMessage, Integer> benefits();

      public abstract Badge badge();
  
      ...
  
  }
  ``` 
- 짧은 시간에 새로운 이벤트를 만들어 `Controller` 에서 사용해주기만 하여 새 이벤트를 고객에게 사용할 수 있게 하였는데 `MVC 패턴` 과 `추상 클래스` `일급 컬렉션` 등의 여러가지 디자인 패턴들을
  사용하니 개발하고 유지보수 하기 엄청 간략화 된다는 느낌을 정말 많이 받을 수 있었습니다.

### 💡 문서화

- 항상 다음 날이 되면 어디까지 개발 하였는지 까먹고 이를 해결하기 위해 // TODO: ~ 를 작성하고 다음 날에 체크하곤 했었습니다.
- IntelliJ 의 기능에 TODO 를 전부 볼 수 있는 기능이 있어 좋았지만 여전히 다음 개발 방향이 어디인지는 헷갈렸었습니다.
- 3주차 부터 `구현할 기능 목록` 을 처음에만 작성하고 끝나지 않고 기능을 하나씩 구현할 때 마다 체크를 해가며 다음 구현할 기능이 무엇인지 파악해 보았습니다.
- 3주차에는 문서를 예쁘게 짜두고 진행하지 않아서 한눈에 볼 수 있는 장점은 얻지 못하였지만 계속해서 업데이트를 하며 죽은 문서가 아님을 보장할 수 있었습니다.
- 하루가 시작이 되면 어제 어디까지 개발을 끝냈고 오늘 어떤 개발을 해야할지 생각하는 시간이 길었지만 `구현할 기능 목록` 에 정리된 항목을 보고 빠르게 시작할 수 있었습니다.
- 또한, `TDD` 에서도 같이 얻었던 이점으로써 가장 중요한 부분인 예외 상황들 중 제가 빠뜨린 부분들을 캐치하여 기능을 추가할 수 있었습니다.

### 💡 Enum

- 1주차 과제에 대해 다른분들이 코드 리뷰를 하는 것을 보고 저도 2주차에 처음으로 `Enum` 을 도입해 보았는데 단순 출력 메세지와 에러 메세지에만 사용하였었습니다.
- 여기에서만 사용해도 출력과 입력 부분에 해당 객체를 넘김으로써 단순히 `String` 을 인자로 넘기는 것이 아닌 지정된 값을 넘기게 되므로 이점을 누릴 수 있었습니다.
- `Enum` 을 클래스 처럼 필드에 부여된 값으로 다른 값을 만들어주는 함수를 구현 후 사용하여 정의된 상수 값을 통해 다른 작업을 할 수 있어서 더욱 더 심화해서 사용할 수 있다는 가능성을 보았습니다.
- 4주차 과제에서 `Enum` 클래스를 `7개` 나 사용했는데 메뉴나 배지 또는 헤택 내역들이 모두 상수로 처리가 되고 이벤트 기간 또한 충분히 처리가 가능하였습니다.
- `Enum` 으로 둠으로써 참조하는 곳에 특정한 값만 들어간 다는 것을 제한할 수 있었고 제가 어떤 것을 넣어야 할지 쉽게 알 수 있었고, 생성자 내부에서 추가적인 검증을 많이 할 필요도 없었습니다.

### 💡 AtomicInteger

- `Model` 쪽 구현 중 `stream` 을 많이 사용하게 되었는데 병렬적으로 계산하며 시간 단축의 효과를 얻는 중 여러 스레드에서 데이터 변경을 하니 `cross thread` 관련 예외가 생겼고 이를
  해결하기 위해 `AtomicInteger` 에 대해 알게 되었습니다.
- 주문 내역의 메뉴들의 개수와 가격을 곱하여 전체 금액을 계산하는 과정에서 사용할 수 있었습니다.
- 학습한 곳: https://codechacha.com/ko/java-atomic-integer/
